<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SquareRangedListAbstract.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">handistCollections</a> &gt; <a href="index.source.html" class="el_package">handist.collections</a> &gt; <span class="el_source">SquareRangedListAbstract.java</span></div><h1>SquareRangedListAbstract.java</h1><pre class="source lang-java linenums">package handist.collections;

import handist.collections.function.LongTBiConsumer;
import handist.collections.function.SquareIndexTConsumer;
import handist.collections.util.Splitter;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Random;
import java.util.function.Consumer;

/**
 * SquareRangedListAbstract is a general interface for SquareRangedList and RangedListProduct.
 *
 * @param &lt;T&gt; represents the type of each element
 * @param &lt;X&gt; represents the type used for the return type of method {@Code subview()} or {@Code split()} methods. In practice, SquareChunk or SquareRangedListView uses SquareRangedList as X and RangedListProduct uses RangedListProduct as X.
 */
public interface SquareRangedListAbstract&lt;T, X extends SquareRangedListAbstract&lt;T, X&gt;&gt; {
    RangedList&lt;T&gt; getRowView(long row);

    RangedList&lt;T&gt; getColumnView(long column);

    void forEachColumn(LongTBiConsumer&lt;RangedList&lt;T&gt;&gt; columnAction);
    void forEachColumn(LongRange range, LongTBiConsumer&lt;RangedList&lt;T&gt;&gt; columnAction);
    void forEachRow(LongTBiConsumer&lt;RangedList&lt;T&gt;&gt; rowAction);
    void forEachRow(LongRange range, LongTBiConsumer&lt;RangedList&lt;T&gt;&gt; rowAction);

    RangedList&lt;RangedList&lt;T&gt;&gt; asRowList();
    RangedList&lt;RangedList&lt;T&gt;&gt; asColumnList();


    void forEachWithSiblings(SquareRange range, Consumer&lt;SquareSiblingAccessor&lt;T&gt;&gt; action);

    void forEach(SquareIndexTConsumer&lt;? super T&gt; action);
    void forEach(SquareRange subrange, SquareIndexTConsumer&lt;? super T&gt; action);

    void forEach(Consumer&lt;? super T&gt; action);
    void forEach(SquareRange subrange, Consumer&lt;? super T&gt; action);

    T get(long index, long index2);
    SquareRange getRange();
    default List&lt;X&gt; getViews(List&lt;SquareRange&gt; ranges) {
<span class="fc" id="L44">        List&lt;X&gt; results = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L45">        ranges.forEach((SquareRange range)-&gt;{</span>
<span class="fc" id="L46">            results.add(subView(range));</span>
<span class="fc" id="L47">        });</span>
<span class="fc" id="L48">        return results;</span>
    }

    T set(long index, long index2, T value);
    X subView(SquareRange range);

    default List&lt;X&gt; split(int outer, int inner) {
<span class="fc" id="L55">        return getViews(splitRange(outer,inner));</span>
    }
    default List&lt;List&lt;X&gt;&gt; splitN(int outer, int inner, int num, boolean randomize) {
<span class="fc" id="L58">        List&lt;SquareRange&gt; ranges = splitRange(outer,inner);</span>
<span class="pc bpc" id="L59" title="1 of 2 branches missed.">        if(randomize) Collections.shuffle(ranges);</span>
<span class="fc" id="L60">        List&lt;List&lt;X&gt;&gt; results = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L61">        Splitter split = new Splitter(ranges.size(), num);</span>
<span class="fc bfc" id="L62" title="All 2 branches covered.">        for(int i=0; i&lt;num; i++) {</span>
<span class="fc" id="L63">            List&lt;SquareRange&gt; assigned = split.getIth(i, ranges);</span>
<span class="fc" id="L64">            results.add(getViews(assigned));</span>
        }
<span class="fc" id="L66">        return results;</span>
    }
    default List&lt;List&lt;X&gt;&gt; splitNM(int outer, int inner, int ithHost, int numHosts, int numThreads, Random rand) {
<span class="nc" id="L69">        List&lt;SquareRange&gt; ranges = splitRange(outer,inner);</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">        if(rand!=null) Collections.shuffle(ranges, rand);</span>
<span class="nc" id="L71">        List&lt;List&lt;X&gt;&gt; results = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L72">        Splitter split = new Splitter(ranges.size(), numHosts);</span>
<span class="nc" id="L73">        Splitter splitIn = new Splitter(split.ith(ithHost), split.ith(ithHost+1), numThreads);</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">        for(int i=0; i&lt;numThreads; i++) {</span>
<span class="nc" id="L75">            List&lt;SquareRange&gt; assigned = splitIn.getIth(i, ranges);</span>
<span class="nc" id="L76">            results.add(getViews(assigned));</span>
        }
<span class="nc" id="L78">        return results;</span>
    }

    default List&lt;SquareRange&gt; splitRange(int outer, int inner) {
<span class="fc" id="L82">        return getRange().split(outer, inner);</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>